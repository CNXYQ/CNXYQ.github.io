<!-- build time:Mon Jun 08 2020 19:40:05 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><title>python列表生成式 | Qing-Bei&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="花尽千霜默 世界苦人多&lt;br&gt;愁醉非因酒 悲吟不是歌"><meta name="author" content="轻北"><meta name="keywords" content="Hello World！,MySQL,TED,git,google,java,python,书签收藏夹,学生管理系统,更新日志,计算机网络"><link rel="alternate" href="/atom.xml" title="Qing-Bei&#39;s Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/hannah.css"><meta name="generator" content="Hexo 4.2.0"></head><body class="container-fluid"><div class="hannah-menu"><i class="fh fh-ravelry fa-2x btn fixed-menu animated bounce" id="btn_menu" aria-hidden="true"></i><div class="menu-outer container-fluid hide animated" id="div_menu"><div class="row" style="margin-bottom:5px"><div class="col-md-offset-2 col-md-3 col-xs-4 text-center left-social"><a target="_blank" href="https://github.com/objectyan" title="GitHub"><i class="fh fh-github"></i></a><style>.left-social{height:132px;line-height:132px;font-size:66px}.left-social *{color:#f1ce8e}@media (max-width:767px){.left-social{line-height:132px;font-size:33px}}</style></div><div class="col-md-2 col-xs-4 text-center"><img src="/img/logo.jpg" alt="Head Image" class="img-circle"></div><div class="col-md-3 col-xs-4 text-center right-social"><style>.right-social{height:132px;line-height:132px;font-size:66px}@media (max-width:767px){.right-social{line-height:132px;font-size:33px}}.right-social *{color:#f1ce8e}</style></div></div><div class="row"><div class="menu-content col-md-8 col-md-push-2 col-xs-12"><dl class="menu-content-item"><dt class="menu-content-title"><i class="fh fh-bars" aria-hidden="true"></i> Menu</dt><dd class="menu-content-content"><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/" class="btn btn-block"><i class="fh fh-ravelry"></i> Home</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/categories" class="btn btn-block"><i class="fh fh-cubes"></i> Category</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/tags" class="btn btn-block"><i class="fh fh-tags"></i> Tag</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/archives" class="btn btn-block"><i class="fh fh-archive"></i> Archives</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/about" class="btn btn-block"><i class="fh fh-about"></i> About</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/doc" class="btn btn-block"><i class="fh fh-document"></i> Doc</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/plug" class="btn btn-block"><i class="fh fh-plug"></i> Plug</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/sitemap" class="btn btn-block"><i class="fh fh-sitemap"></i> SiteMap</a></div><div class="col-md-4 col-xs-6 col-sm-4 text-center animated tada"><a href="/atom.xml" class="btn btn-block"><i class="fh fh-rss" aria-hidden="true"></i> RSS</a></div></dd></dl></div></div><div class="row"><div class="menu-content col-md-8 col-md-offset-2 col-xs-12"><dl class="col-md-6 col-xs-6 menu-content-item"><dt class="menu-content-title"><i class="fh fh-cubes" aria-hidden="true"></i> Category</dt><dd class="menu-content-content animated zoomIn"><ul class="menu-cate-list"><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/Hello/"><i class="fh fh-cube" aria-hidden="true"></i> Hello</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/TED/"><i class="fh fh-cube" aria-hidden="true"></i> TED</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/git/"><i class="fh fh-cube" aria-hidden="true"></i> git</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/google/"><i class="fh fh-cube" aria-hidden="true"></i> google</a><span class="menu-cate-list-count">1</span><ul class="menu-cate-list-child"><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/google/%E4%B9%A6%E7%AD%BE%E6%94%B6%E8%97%8F%E5%A4%B9%E8%B0%B7%E6%AD%8C/"><i class="fh fh-cube" aria-hidden="true"></i> 书签收藏夹谷歌</a><span class="menu-cate-list-count">1</span></li></ul></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/java/"><i class="fh fh-cube" aria-hidden="true"></i> java</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/python/"><i class="fh fh-cube" aria-hidden="true"></i> python</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><i class="fh fh-cube" aria-hidden="true"></i> 学生管理系统</a><span class="menu-cate-list-count">1</span></li><li class="menu-cate-list-item"><a class="menu-cate-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><i class="fh fh-cube" aria-hidden="true"></i> 计算机网络</a><span class="menu-cate-list-count">3</span></li></ul></dd></dl><dl class="col-md-6 col-xs-6 menu-content-item"><dt class="menu-content-title"><i class="fh fh-tag" aria-hidden="true"></i> Tags</dt><dd class="menu-content-content animated zoomIn"><ul class="menu-tag-list" itemprop="keywords"><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/Hello-World%EF%BC%81/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> Hello World！</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/MySQL/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> MySQL</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/TED/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> TED</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/git/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> git</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/google/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> google</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/java/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> java</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/python/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> python</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E4%B9%A6%E7%AD%BE%E6%94%B6%E8%97%8F%E5%A4%B9/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 书签收藏夹</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 学生管理系统</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 更新日志</a><span class="menu-tag-list-count">1</span></li><li class="menu-tag-list-item"><a class="menu-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"><i class="fh fh-tag" aria-hidden="true"></i> 计算机网络</a><span class="menu-tag-list-count">3</span></li></ul></dd></dl></div></div></div></div><div class="row hannah-body"><div class="col-md-8 col-md-push-2 col-xs-12"><div class="bread-crumb"><ul class="bread-crumb-menu animated rubberBand"><li><a href="/"><i class="fh fh-ravelry" aria-hidden="true"></i> Home</a></li><li><a href="/categories/python/"><i class="fh fh-cube" aria-hidden="true"></i> python</a></li><li><i class="fh fh-newspaper-o" aria-hidden="true"></i> python列表生成式</li></ul><div class="bread-crumb-search"><div class="search"><i class="fh fh-search icon-search"></i> <input placeholder="Search ..." onkeyup='searchFunc(this,event,"/search.xml")' class="input-search animated fadeInRight"><div class="search-result animated fadeInRight"><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/18/Stay-hungry-Stay-Foolish/">Stay hungry. Stay Foolish.</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/17/%E8%B0%B7%E6%AD%8C%E4%B9%A6%E7%AD%BE/">个人的谷歌书签</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/05/python%E5%88%97%E8%A1%A8%E7%94%9F%E6%88%90%E5%BC%8F/">python列表生成式</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/04/git%E4%B8%8A%E4%BC%A0%E5%A4%A7%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85PDF%E6%88%96%E8%80%85%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0/">git上传大文件或者PDF或者二进制文件无法上传</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/01/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">学生管理系统</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/03/01/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/">更新日志</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/02/29/1.3%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83/">1.3网络核心</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/02/27/1.2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84/">1.2计算机网络结构</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/02/27/1.1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">1.1计算机网络基本概念</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/01/07/Java-Connect-MySQL/">Java-Connect-MySQL</a><a class="animated tada col-lg-12 search-result-item result-link" href="/2020/01/07/hello-world/">Hello, I am</a></div></div></div></div><article class="post animated rollIn"><h1 class="post-title">python列表生成式</h1><div class="post-subtitle"><time datetime="2020-03-05T15:08:15.000Z" class="item"><i class="fh fh-calendar" aria-hidden="true"></i>&nbsp;&nbsp;2020-03-05 </time><span class="item"><i class="fh fh-cubes" aria-hidden="true"></i>&nbsp; <a class="label label-primary tags" href="/categories/python/"><i class="fh fh-cube" aria-hidden="true"></i>&nbsp;python </a></span><span class="item"><i class="fh fh-tags" aria-hidden="true"></i>&nbsp; <a class="label label-info tags" href="/tags/python/"><i class="fh fh-tag" aria-hidden="true"></i>&nbsp;python</a></span></div><h1 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式"></a>列表生成式</h1><p>列表生成式即List Comprehensions，是Python内置的非常简单却强大的可以用来创建list的生成式。</p><p>举个例子，要生成list <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</code>可以用<code>list(range(1, 11))</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(range(<span class="number">1</span>, <span class="number">11</span>))</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure><p>但如果要生成<code>[1x1, 2x2, 3x3, ..., 10x10]</code>怎么做？方法一是循环：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line"><span class="meta">... </span>   L.append(x * x)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure><p>但是循环太繁琐，而列表生成式则可以用一行语句代替循环生成上面的list：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure><p>写列表生成式时，把要生成的元素<code>x * x</code>放到前面，后面跟<code>for</code>循环，就可以把list创建出来，十分有用，多写几次，很快就可以熟悉这种语法。</p><p>for循环后面还可以加上if判断，这样我们就可以筛选出仅偶数的平方：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line">[<span class="number">4</span>, <span class="number">16</span>, <span class="number">36</span>, <span class="number">64</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure><p>还可以使用两层循环，可以生成全排列：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'XYZ'</span>]</span><br><span class="line">[<span class="string">'AX'</span>, <span class="string">'AY'</span>, <span class="string">'AZ'</span>, <span class="string">'BX'</span>, <span class="string">'BY'</span>, <span class="string">'BZ'</span>, <span class="string">'CX'</span>, <span class="string">'CY'</span>, <span class="string">'CZ'</span>]</span><br></pre></td></tr></table></figure><p>三层和三层以上的循环就很少用到了。</p><p>运用列表生成式，可以写出非常简洁的代码。例如，列出当前目录下的所有文件和目录名，可以通过一行代码实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os <span class="comment"># 导入os模块，模块的概念后面讲到</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[d <span class="keyword">for</span> d <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>)] <span class="comment"># os.listdir可以列出文件和目录</span></span><br><span class="line">[<span class="string">'.emacs.d'</span>, <span class="string">'.ssh'</span>, <span class="string">'.Trash'</span>, <span class="string">'Adlm'</span>, <span class="string">'Applications'</span>, <span class="string">'Desktop'</span>, <span class="string">'Documents'</span>, <span class="string">'Downloads'</span>, <span class="string">'Library'</span>, <span class="string">'Movies'</span>, <span class="string">'Music'</span>, <span class="string">'Pictures'</span>, <span class="string">'Public'</span>, <span class="string">'VirtualBox VMs'</span>, <span class="string">'Workspace'</span>, <span class="string">'XCode'</span>]</span><br></pre></td></tr></table></figure><p><code>for</code>循环其实可以同时使用两个甚至多个变量，比如<code>dict</code>的<code>items()</code>可以同时迭代key和value：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'x'</span>: <span class="string">'A'</span>, <span class="string">'y'</span>: <span class="string">'B'</span>, <span class="string">'z'</span>: <span class="string">'C'</span> &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line"><span class="meta">... </span>    print(k, <span class="string">'='</span>, v)</span><br><span class="line">...</span><br><span class="line">y = B</span><br><span class="line">x = A</span><br><span class="line">z = C</span><br></pre></td></tr></table></figure><p>因此，列表生成式也可以使用两个变量来生成list：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'x'</span>: <span class="string">'A'</span>, <span class="string">'y'</span>: <span class="string">'B'</span>, <span class="string">'z'</span>: <span class="string">'C'</span> &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[k + <span class="string">'='</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line">[<span class="string">'y=B'</span>, <span class="string">'x=A'</span>, <span class="string">'z=C'</span>]</span><br></pre></td></tr></table></figure><p>最后把一个list中所有的字符串变成小写：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Hello'</span>, <span class="string">'World'</span>, <span class="string">'IBM'</span>, <span class="string">'Apple'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[s.lower() <span class="keyword">for</span> s <span class="keyword">in</span> L]</span><br><span class="line">[<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'ibm'</span>, <span class="string">'apple'</span>]</span><br></pre></td></tr></table></figure><h3 id="if-…-else"><a href="#if-…-else" class="headerlink" title="if … else"></a>if … else</h3><p>使用列表生成式的时候，有些童鞋经常搞不清楚<code>if...else</code>的用法。</p><p>例如，以下代码正常输出偶数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure><p>但是，我们不能在最后的<code>if</code>加上<code>else</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>]</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    [x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>]</span><br><span class="line">                                              ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><p>这是因为跟在<code>for</code>后面的<code>if</code>是一个筛选条件，不能带<code>else</code>，否则如何筛选？</p><p>另一些童鞋发现把<code>if</code>写在<code>for</code>前面必须加<code>else</code>，否则报错：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    [x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">                       ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><p>这是因为<code>for</code>前面的部分是一个表达式，它必须根据<code>x</code>计算出一个结果。因此，考察表达式：<code>x if x % 2 == 0</code>，它无法根据<code>x</code>计算出结果，因为缺少<code>else</code>，必须加上<code>else</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">[<span class="number">-1</span>, <span class="number">2</span>, <span class="number">-3</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">6</span>, <span class="number">-7</span>, <span class="number">8</span>, <span class="number">-9</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure><p>上述<code>for</code>前面的表达式<code>x if x % 2 == 0 else -x</code>才能根据<code>x</code>计算出确定的结果。</p><p>可见，在一个列表生成式中，<code>for</code>前面的<code>if ... else</code>是表达式，而<code>for</code>后面的<code>if</code>是过滤条件，不能带<code>else</code>。</p></article><ol class="animated rollIn hannah-toc"><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-1"><a class="animated rollIn hannah-toc-link" href="#列表生成式"><span class="animated rollIn hannah-toc-text">列表生成式</span></a><ol class="animated rollIn hannah-toc-child"><li class="animated rollIn hannah-toc-item animated rollIn hannah-toc-level-3"><a class="animated rollIn hannah-toc-link" href="#if-…-else"><span class="animated rollIn hannah-toc-text">if … else</span></a></li></ol></li></ol><div class="animated bounceInDown paginations"><div class="col-md-8 col-md-push-2 col-xs-12"><nav><a href="/2020/03/17/%E8%B0%B7%E6%AD%8C%E4%B9%A6%E7%AD%BE/" class="prev col-md-2 col-xs-4 text-left">&larr; Prev</a> <span class="page-content col-md-8 col-xs-4 text-center"></span> <a href="/2020/03/04/git%E4%B8%8A%E4%BC%A0%E5%A4%A7%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85PDF%E6%88%96%E8%80%85%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0/" class="next col-md-2 col-xs-4 text-right">Next &rarr;</a></nav><div><div class="col-md-6 col-xs-6 text-left">个人的谷歌书签</div><div class="col-md-6 col-xs-6 text-right">git上传大文件或者PDF或者二进制文件无法上传</div></div></div></div><div class="comments"><div id="gitalk-container"></div><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script>var loadJs=function(e,t){var a=document.getElementsByTagName("head")[0]||document.head||document.documentElement,n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),"function"==typeof t&&(window.attachEvent?n.onreadystatechange=function(){var e=n.readyState;"loaded"!==e&&"complete"!==e||(n.onreadystatechange=null,t())}:n.onload=t),a.appendChild(n)};loadJs("https://unpkg.com/gitalk/dist/gitalk.min.js",function(){var e=new Gitalk({clientID:"e82b50d554e32a851ae7",clientSecret:"95923aeaddb44e6de22d088703c6bbde978f505c",repo:"objectyan.github.io",owner:"objectyan",admin:["objectyan"],id:decodeURIComponent(location.pathname),distractionFreeMode:!1});e.render("gitalk-container")})</script></div></div></div><footer id="footer" class="footer animated fadeInUp hide"><p><i class="copy">&copy;</i> 2020 <a href="http://www.qing-bei.com">轻北</a> All Right Reserved.</p><p>Powered by <a href="http://hexo.io" target="_blank" rel="external nofollow noopener">Hexo</a>. Theme by <a href="https://github.com/objectyan/hexo-theme-hannah" target="_blank" rel="external nofollow noopener">hannah</a></p></footer><script src="/js/hannah.js"></script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8fb2a05be303b36faebf141d7317de43";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(t){function n(){for(var n=0;n<e.length;n++)i=e[n],0<=(o=i.getBoundingClientRect()).bottom&&0<=o.left&&o.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,i,o,r,c=e[n];t=c,i=function(){e=e.filter(function(t){return c!==t})},o=new Image,r=t.getAttribute("data-original"),o.onload=function(){t.src=r,i&&i()},o.src=r}();var i,o}var e=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));n(),t.addEventListener("scroll",function(){var e,i;e=n,i=t,clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(i)},500)})}(this)</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script></body><script>var nesturl = "https://unpkg.com/canvas-nest.js/dist/canvas-nest.js";
    var c = document.getElementsByTagName("body")[0] || document.body || document.documentElement;
    var b = document.createElement("script");
    b.setAttribute("type", "text/javascript");
    b.setAttribute("src", nesturl);
    b.setAttribute("color",
        `${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)},${ Math.floor(Math.random()*256)}`);
    b.setAttribute("opacity", Math.random());
    b.setAttribute("count", parseInt((Math.random() * 500) || 99));
    c.appendChild(b)</script></html><!-- rebuild by neat -->